import os
import logging
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
from aiogram.types import InlineKeyboardButton, InlineKeyboardMarkup

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging.basicConfig(level=logging.INFO)

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
API_TOKEN = os.getenv('BOT_TOKEN')
MANAGER_TELEGRAM_ID = 'raszd189'  # Telegram-–Ω–∏–∫–Ω–µ–π–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=API_TOKEN)
dp = Dispatcher()

# –ö–Ω–æ–ø–∫–∏ –¥–ª—è –±–æ—Ç–∞
def create_buttons():
    buttons = [
        [InlineKeyboardButton(text="üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º", url=f"https://t.me/{MANAGER_TELEGRAM_ID}")], 
        [InlineKeyboardButton(text="üì∑ –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ç–æ", callback_data="request_photo")]
    ]
    return InlineKeyboardMarkup(inline_keyboard=buttons)

# –ö–æ–º–∞–Ω–¥–∞ /start
@dp.message(Command("start"))
async def cmd_start(message: types.Message):
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞ –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –í–æ—Ç —á—Ç–æ —è –º–æ–≥—É:\n\n"
        "- –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–¥—É–∫—Ü–∏–∏\n"
        "- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞\n"
        "- –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ü–∏–∏",
        reply_markup=create_buttons()
    )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
@dp.callback_query()
async def handle_callback(callback_query: types.CallbackQuery):
    if callback_query.data == "request_photo":
        await callback_query.message.answer(
            "–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ–¥—É–∫—Ü–∏–∏, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º: "
            f"[https://t.me/{MANAGER_TELEGRAM_ID}](https://t.me/{MANAGER_TELEGRAM_ID})", 
            parse_mode="Markdown"
        )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
@dp.message()
async def handle_text(message: types.Message):
    user_text = message.text.lower()

    # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π: –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
    faq = {
        "–∫–∞–∫–æ–π —Ç–∏–ø|–≤–∏–¥|—á—Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç–µ": (
            "–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –æ–±—Ä–µ–∑–Ω—ã–µ —Ö–≤–æ–π–Ω—ã–µ –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª—ã (—Å–æ—Å–Ω–∞, –µ–ª—å) –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤. "
            "–¢–∞–∫–∂–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –±—Ä—É—Å–æ–∫ 50√ó50√ó3 –º –∏ —Ä–µ–π–∫—É 25√ó50√ó3 –º. "
            "–ï—Å—Ç—å –¥–æ—Å–∫–∞ 2-–≥–æ —Å–æ—Ä—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞–º–∏ 25√ó100 –∏ 25√ó150 (–¥–ª–∏–Ω–æ–π 3 –∏–ª–∏ 6 –º–µ—Ç—Ä–æ–≤)."
        ),
        "—Å–æ—Ä—Ç–∞|–∫–∞–∫–∏–µ —Å–æ—Ä—Ç–∞": (
            "–ú—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª—ã 1-–≥–æ –∏ 2-–≥–æ —Å–æ—Ä—Ç–æ–≤. "
            "–î–æ—Å–∫–∞ 2-–≥–æ —Å–æ—Ä—Ç–∞ –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –≥–µ–æ–º–µ—Ç—Ä–∏—é, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª—å—à–µ –æ–±–∑–æ–ª–∞, –∏–∑-–∑–∞ —á–µ–≥–æ —Å—Ç–æ–∏—Ç –¥–µ—à–µ–≤–ª–µ."
        ),
        "–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º|—Å–∫–æ–ª—å–∫–æ –º–∏–Ω–∏–º—É–º –∑–∞–∫–∞–∑–∞—Ç—å": (
            "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –∑–∞–∫–∞–∑–∞:\n"
            "- –î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: **40 –∫—É–±–æ–≤**.\n"
            "- –î–ª—è —Ç—Ä–µ—Ö–º–µ—Ä–æ–≤—ã—Ö –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: **33 –∫—É–±–∞**."
        ),
        "–æ–ø–ª–∞—Ç–∞|–∫–∞–∫ –ø–ª–∞—Ç–∏—Ç—å": (
            "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –∫–∞–∫ –ø–æ –Ω–∞–ª–∏—á–Ω–æ–º—É, —Ç–∞–∫ –∏ –ø–æ –±–µ–∑–Ω–∞–ª–∏—á–Ω–æ–º—É —Ä–∞—Å—á–µ—Ç—É. "
            "–û–ø–ª–∞—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–∞ —Å –ù–î–° –∏ –±–µ–∑ –ù–î–°. –¢–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º –æ–ø–ª–∞—Ç—É –Ω–∞–ª–∏—á–Ω—ã–º–∏."
        ),
        "–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è|–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ|–≤–∞—à –∑–∞–≤–æ–¥": (
            "–ù–∞—à–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –¢–≤–µ—Ä—Å–∫–æ–π –∏ –í–ª–∞–¥–∏–º–∏—Ä—Å–∫–æ–π –æ–±–ª–∞—Å—Ç—è—Ö."
        ),
        "–æ–±—ä–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞|—Å–∫–æ–ª—å–∫–æ –≤—ã–ø—É—Å–∫–∞–µ—Ç–µ": (
            "–û–±—ä–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ 5000 —Ç—ã—Å. –∫—É–±–æ–≤ –≤ –º–µ—Å—è—Ü."
        ),
        "—Å—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏|–∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∞–≤—è—Ç": (
            "–°—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–µ–º –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å—Ä–æ—á–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É."
        ),
        "–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã|–º–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å": (
            "–ú—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤. "
            "–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Ç—Ä–µ—Ö–º–µ—Ä–æ–≤—ã—Ö –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –∑–∞–∫–∞–∑–∞ ‚Äî 33 –∫—É–±–∞."
        ),
        "—á—Ç–æ —Ç–∞–∫–æ–µ –¥–æ—Å–∫–∞ 2-–≥–æ —Å–æ—Ä—Ç–∞|–¥–æ—Å–∫–∞ 2 —Å–æ—Ä—Ç–∞": (
            "–î–æ—Å–∫–∞ 2-–≥–æ —Å–æ—Ä—Ç–∞ –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –≥–µ–æ–º–µ—Ç—Ä–∏—é, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –æ–±–∑–æ–ª–∞, –∏–∑-–∑–∞ —á–µ–≥–æ —Å—Ç–æ–∏—Ç –¥–µ—à–µ–≤–ª–µ. "
            "–†–∞–∑–º–µ—Ä—ã: 25√ó100 –º–º –∏ 25√ó150 –º–º, –¥–ª–∏–Ω–∞: 3 –∏–ª–∏ 6 –º–µ—Ç—Ä–æ–≤. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —á–µ—Ä–Ω–æ–≤—ã—Ö —Ä–∞–±–æ—Ç."
        ),
        "–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ|—á–µ—Ä–µ–∑ —Ñ–≥–∏—Å": (
            "–î–∞, –º—ã —Ä–∞–±–æ—Ç–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ –§–ì–ò–° (–§–µ–¥–µ—Ä–∞–ª—å–Ω—É—é –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É)."
        ),
        "—Å–≤—è–∑–∞—Ç—å—Å—è|–º–µ–Ω–µ–¥–∂–µ—Ä|—Å—Ä–æ—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è": (
            "–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ —Å—Ä–æ—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º: "
            f"[https://t.me/{MANAGER_TELEGRAM_ID}](https://t.me/{MANAGER_TELEGRAM_ID}).  "
            "–õ–∏–±–æ –æ—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏."
        )
    }

    # –ü–æ–∏—Å–∫ –æ—Ç–≤–µ—Ç–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
    for keywords, answer in faq.items():
        if any(keyword in user_text for keyword in keywords.split('|')):
            await message.answer(answer, reply_markup=create_buttons())
            return

    # –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
    await message.answer(
        "–Ø –Ω–µ –ø–æ–Ω—è–ª –≤–∞—à –≤–æ–ø—Ä–æ—Å. –í–æ—Ç —á—Ç–æ —è –º–æ–≥—É:\n\n"
        "- –†–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ —Ç–∏–ø–∞—Ö –ø–∏–ª–æ–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤\n"
        "- –°–æ–æ–±—â–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –∑–∞–∫–∞–∑–∞\n"
        "- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞\n\n"
        "–ù–∞–ø–∏—à–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –∑–∞–∫–∞–∑–∞' –∏–ª–∏ '–ö–∞–∫–∏–µ —Å–æ—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã'.",
        reply_markup=create_buttons()
    )

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
async def main():
    await dp.start_polling(bot)

if __name__ == '__main__':
    import asyncio
    asyncio.run(main())
